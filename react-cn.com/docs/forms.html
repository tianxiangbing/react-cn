<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<title>表单组件-React中国</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta name="keywords" content="jsx,表单组件" />
	<meta name="description" content="表单组件" />
	<link rel="stylesheet" href="http://www.react-cn.com/css/css.css">
	<link rel="shortcut icon" href="http://www.react-cn.com/favicon.ico">
</head>
<body>
<header>
	<h1><a class="logo" href="http://www.react-cn.com/"><img class="nav-logo" src="http://www.react-cn.com//logo.svg" width="36" height="36">React中国</a></h1>
	<nav class="menu">
		<a href="http://www.react-cn.com/index.html" >首页</a>
		<a href="http://www.react-cn.com/downloads.html" >下载</a>
		<a href="http://www.react-cn.com/docs/getting-started.html" class="active">中文文档</a>
		<a href="http://www.react-cn.com/addons/index.html" >react 工具</a>
		<a href="http://www.react-cn.com/plugin.html" >react 插件</a>
		<a href="http://www.react-cn.com/docs/examples.html" >例子</a>
	</nav>
	<div class="submenu">
		<a target="_blank" href="http://www.react-cn.com//shang.qq.com/wpa/qunwpa?idkey=db86a206a1e04f114217ccffd92ee11f5faca14d283a71d97817937ee3cf9d00"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="reactjs、reactnative技术群" title="reactjs、reactnative技术群"></a>
		<a href="http://www.react-cn.com/about.html">关于我们</a>
		<!--<a href="http://www.react-cn.com/reactnative/index.html">React Native中文资料</a>-->
	</div>
</header>
<div class="container documentationContent">
	<div class="rightContainer">
		<div class="inner">
			<a class="edit-page-link" href="https://github.com/tianxiangbing/react-cn/tree/master/src/docs/md/forms.md" target="_blank">在github上编辑这篇文章</a>
			<h1><a name="-" class="anchor" href="#-"></a>表单组件<a  class="hash-link" href="#-">#</a></h1><p>诸如 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code>、<code>&lt;option&gt;</code> 这样的表单组件不同于其他原生组件，因为他们可以通过用户交互发生变化。这些组件提供的界面使响应用户交互的表单数据处理更加容易。</p>
<p>关于 <code>&lt;form&gt;</code> 事件详情请查看 <a href="/docs/events-zh-CN.html#表单事件">表单事件</a>。</p>
<h2><a name="-" class="anchor" href="#-"></a>交互属性<a  class="hash-link" href="#-">#</a></h2><p>表单组件支持几个受用户交互影响的属性：</p>
<ul>
<li><code>value</code>，用于 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code> 组件。</li>
<li><code>checked</code>，用于类型为 <code>checkbox</code> 或者 <code>radio</code> 的 <code>&lt;input&gt;</code> 组件。</li>
<li><code>selected</code>，用于 <code>&lt;option&gt;</code> 组件。</li>
</ul>
<p>在 HTML 中，<code>&lt;textarea&gt;</code> 的值通过子节点设置；在 React 中则应该使用 <code>value</code> 代替。</p>
<p>表单组件可以通过 <code>onChange</code> 回调函数来监听组件变化。当用户做出以下交互时，<code>onChange</code> 执行并通过浏览器做出响应：</p>
<ul>
<li><code>&lt;input&gt;</code> 或 <code>&lt;textarea&gt;</code> 的 <code>value</code> 发生变化时。</li>
<li><code>&lt;input&gt;</code> 的 <code>checked</code> 状态改变时。</li>
<li><code>&lt;option&gt;</code> 的 <code>selected</code> 状态改变时。</li>
</ul>
<p>和所有 DOM 事件一样，所有的 HTML 原生组件都支持 <code>onChange</code> 属性，而且可以用来监听冒泡的 <code>change</code> 事件。</p>
<blockquote>
<p>注意:</p>
<p>对于 <code>&lt;input&gt;</code> and <code>&lt;textarea&gt;</code>， <code>onChange</code> 取代 — 一般应该用来替代 — DOM内建的 <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/oninput"><code>oninput</code></a> 事件处理。</p>
</blockquote>
<h2><a name="-" class="anchor" href="#-"></a>受控组件<a  class="hash-link" href="#-">#</a></h2><p>一个<em>受控</em>的 <code>&lt;input&gt;</code> 有一个 <code>value</code> prop。渲染一个受控 <code>&lt;input&gt;</code> 会反映 <code>value</code> prop 的值。</p>
<pre><code class="lang-javascript">  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">return</span> &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span> value=<span class="hljs-string">"Hello!"</span> /&gt;;
  }
</code></pre>
<p>用户输入在被渲染的元素里将没有作用,因为 React 已经声明值为 <code>Hello!</code>。要更新 value 来响应用户输入，你可以使用 <code>onChange</code> 事件：</p>
<pre><code class="lang-javascript">  getInitialState: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">return</span> {<span class="hljs-keyword">value</span>: <span class="hljs-string">'Hello!'</span>};
  },
  handleChange: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span></span> {
    this.setState({<span class="hljs-keyword">value</span>: event.<span class="hljs-type">target</span>.<span class="hljs-keyword">value</span>});
  },
  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">return</span> (
      &lt;input
        <span class="hljs-keyword">type</span>=<span class="hljs-string">"text"</span>
        <span class="hljs-keyword">value</span>={this.state.<span class="hljs-keyword">value</span>}
        onChange={this.handleChange}
      /&gt;
    );
  }
</code></pre>
<p>在这个例子中，我们接受用户提供的值并更新 <code>&lt;input&gt;</code> 组件的 <code>value</code> prop。这个模式使实现响应或者验证用户输入的界面更容易。例如：</p>
<pre><code class="lang-javascript">  <span class="hljs-rule"><span class="hljs-attribute">handleChange</span>:<span class="hljs-value"> <span class="hljs-function">function</span>(event) {
    this.<span class="hljs-function">setState</span>({value: event.target.value.<span class="hljs-function">substr</span>(<span class="hljs-number">0</span>, <span class="hljs-number">140</span>)})</span></span>;
  }
</code></pre>
<p>上面的代码接受用户输入，并截取前 140 个字符。</p>
<p>受控组件不维持一个自己的内部状态;它单纯的基于 props 渲染。</p>
<h3><a name="-" class="anchor" href="#-"></a>复选框与单选按钮的潜在问题<a  class="hash-link" href="#-">#</a></h3><p>当心，在力图标准化复选框与单选按钮的变换处理中，React使用 <code>click</code> 事件代替 <code>change</code> 事件。在大多数情况下它们表现的如同预期，除了在<code>change</code> handler中调用<code>preventDefault</code> 。<code>preventDefault</code> 阻止了浏览器视觉上更新输入，即使<code>checked</code>被触发。变通的方式是要么移除<code>preventDefault</code>的调用，要么把<code>checked</code> 的触发放在一个<code>setTimeout</code>里。</p>
<h2><a name="-" class="anchor" href="#-"></a>不受控组件<a  class="hash-link" href="#-">#</a></h2><p>一个没有 <code>value</code> 属性的 <code>&lt;input&gt;</code> 是一个不<em>受控</em>组件:</p>
<pre><code class="lang-javascript">  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">return</span> &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span> /&gt;;
  }
</code></pre>
<p>上面的代码将渲染出一个空值的输入框，用户输入将立即反应到元素上。和受控元素一样，使用 <code>onChange</code> 事件可以监听值的变化。</p>
<p><em>不受控</em>组件维持它自己的内部状态。</p>
<h3><a name="-" class="anchor" href="#-"></a>默认值<a  class="hash-link" href="#-">#</a></h3><p>如果想给组件设置一个非空的初始值，可以使用 <code>defaultValue</code> 属性。例如：</p>
<pre><code class="lang-javascript">  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">return</span> &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span> defaultValue=<span class="hljs-string">"Hello!"</span> /&gt;;
  }
</code></pre>
<p>这个例子会像上面的 <strong>受控组件</strong> 例子一样运行。</p>
<p>同样的， <code>&lt;input type=&quot;checkbox&quot;&gt;</code> 和 <code>&lt;input type=&quot;radio&quot;&gt;</code> 支持 <code>defaultChecked</code> 、 <code>&lt;select&gt;</code> 支持 <code>defaultValue</code>.</p>
<blockquote>
<p>注意:</p>
<p> <code>defaultValue</code> 和 <code>defaultChecked</code> props 只能在内部渲染时被使用。 如果你需要在随后的渲染更新值, 你需要使用 <a href="#受控组件">受控组件</a>.</p>
</blockquote>
<h2><a name="-" class="anchor" href="#-"></a>高级主题<a  class="hash-link" href="#-">#</a></h2><h3><a name="-" class="anchor" href="#-"></a>为什么使用受控组件？<a  class="hash-link" href="#-">#</a></h3><p>在 React 中使用诸如 <code>&lt;input&gt;</code> 的表单组件时，遇到了一个在传统 HTML 中没有的挑战。比如下面的代码：</p>
<pre><code class="lang-html">  &lt;input <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">"text"</span> name=<span class="hljs-string">"title"</span> value=<span class="hljs-string">"Untitled"</span> /&gt;
</code></pre>
<p>它渲染一个<em>初始值</em>为 <code>Untitled</code> 的输入框。当用户改变输入框的值时，节点的 <code>value</code> 属性( <em>property</em>)将随之变化，但是 <code>node.getAttribute(&#39;value&#39;)</code> 还是会返回初始设置的值 <code>Untitled</code>.</p>
<p>与 HTML 不同，React 组件必须在任何时间点表现视图的状态，而不仅仅是在初始化时。比如在 React 中：</p>
<pre><code class="lang-javascript">  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">return</span> &lt;input <span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span> name=<span class="hljs-string">"title"</span> value=<span class="hljs-string">"Untitled"</span> /&gt;;
  }
</code></pre>
<p>由于这个方法描述了在任意时间点上的视图，那么文本输入框的值就应该<em>始终</em>为 <code>Untitled</code>。</p>
<h3><a name="-code-lt-textarea-gt-code-code-value-code-" class="anchor" href="#-code-lt-textarea-gt-code-code-value-code-"></a>为什么 <code>&lt;textarea&gt;</code> 使用 <code>value</code> 属性？<a  class="hash-link" href="#-code-lt-textarea-gt-code-code-value-code-">#</a></h3><p>在 HTML 中， <code>&lt;textarea&gt;</code> 的值通常使用子节点设置：</p>
<pre><code class="lang-html">  <span class="hljs-comment">&lt;!-- 反例：在 React 中不要这样使用！ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">textarea</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"description"</span>&gt;</span>This is the description.<span class="hljs-tag">&lt;/<span class="hljs-title">textarea</span>&gt;</span>
</code></pre>
<p>对 HTML 而言，让开发者设置多行的值很容易。但是，由于 React 是 JavaScript，没有字符串限制，可以使用 <code>\n</code> 实现换行。简言之，React 已经有 <code>value</code>、<code>defaultValue</code> 属性，<code>&lt;textarea&gt;</code> 组件的子节点扮演什么角色就有点模棱两可了。基于此， 设置 <code>&lt;textarea&gt;</code> 值时不应该使用子节点：</p>
<pre><code class="lang-javascript">  &lt;<span class="hljs-tag">textarea</span> name=<span class="hljs-string">"description"</span> value=<span class="hljs-string">"This is a description."</span> /&gt;
</code></pre>
<p>如果 <em>非要</em> 使用子节点，效果和使用 <code>defaultValue</code> 一样。</p>
<h3><a name="-code-lt-select-gt-code-code-value-code-" class="anchor" href="#-code-lt-select-gt-code-code-value-code-"></a>为什么 <code>&lt;select&gt;</code> 使用 <code>value</code> 属性<a  class="hash-link" href="#-code-lt-select-gt-code-code-value-code-">#</a></h3><p>HTML 中 <code>&lt;select&gt;</code> 通常使用 <code>&lt;option&gt;</code> 的 <code>selected</code> 属性设置选中状态；React 为了更方便地控制组件，采用以下方式代替：</p>
<pre><code class="lang-javascript">  &lt;select <span class="hljs-keyword">value</span>=<span class="hljs-string">"B"</span>&gt;
    &lt;<span class="hljs-keyword">option</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"A"</span>&gt;Apple&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"B"</span>&gt;Banana&lt;/<span class="hljs-keyword">option</span>&gt;
    &lt;<span class="hljs-keyword">option</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"C"</span>&gt;Cranberry&lt;/<span class="hljs-keyword">option</span>&gt;
  &lt;/select&gt;
</code></pre>
<p>如果是不受控组件，则使用 <code>defaultValue</code>。</p>
<blockquote>
<p>注意：</p>
<p>给 <code>value</code> 属性传递一个数组，可以选中多个选项：<code>&lt;select multiple={true} value={[&#39;B&#39;, &#39;C&#39;]}&gt;</code>。</p>
</blockquote>

            <div class="docs-prevnext"><a href="http://www.react-cn.com/docs/transferring-props.html" class="prev">← 上一条 </a><a class="next" href="http://www.react-cn.com/docs/working-with-the-browser.html">下一条 →</a></div>
		</div> 
	</div>
    <div class="docnav">
    <div class="nav-docs-section">
      <h3>快速入门</h3>
      <ul>
          <li>
            <a href="http://www.react-cn.com/docs/getting-started.html" >快速开始</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/tutorial.html" >教程</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/thinking-in-react.html" >React编程思想</a>
          </li>
      </ul>
    </div>
    <div class="nav-docs-section">
      <h3>导航</h3>
      <ul>
          <li>
            <a href="http://www.react-cn.com/docs/why-react.html" >为什么使用React?</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/displaying-data.html" >显示数据</a>
            <ul>
                  <li>
                    <a href="http://www.react-cn.com/docs/jsx-in-depth.html" >深入 JSX</a>
                  </li>
                
                  <li>
                    <a href="http://www.react-cn.com/docs/jsx-spread.html" >JSX 展开属性</a>
                  </li>
                
                  <li>
                    <a href="http://www.react-cn.com/docs/jsx-gotchas.html" >JSX 陷阱</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/interactivity-and-dynamic-uis.html" >动态交互式用户界面</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/reusable-components.html" >可复用组件</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/transferring-props.html" >传递 Props</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/forms.html" class="active">表单组件</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/working-with-the-browser.html" >与浏览器协作</a>
              <ul>
                <li>
                  <a href="http://www.react-cn.com/docs/more-about-refs.html" >对组件的refs</a>
                </li>
              </ul>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/tooling-integration.html" >工具集成</a>
            
              <ul>
                
                  <li>
                    <a href="http://www.react-cn.com/docs/language-tooling.html" >语言工具</a>
                  </li>
                
                  <li>
                    <a href="http://www.react-cn.com/docs/package-management.html" >包管理</a>
                  </li>
                
                  <li>
                    <a href="http://www.react-cn.com/docs/environments.html" >服务端环境</a>
                  </li>
              </ul>
          </li>
          <li>
            <a target="_blank" href="http://www.react-cn.com/addons/index.html" >插件</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/advanced-performance.html" >先进的性能</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/context.html" >Context</a>
          </li>
      </ul>
    </div>
    <div class="nav-docs-section">
      <h3>社区资源</h3>
      <ul>
          <li>
            <a href="http://www.react-cn.com/docs/conferences.html" >会议</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/videos.html" >视频</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/complementary-tools.html" >辅助工具</a>
          </li>
          <li>
            <a href="http://www.react-cn.com/docs/examples.html" >react例子</a>
          </li>
      </ul>
    </div>
</div>
</div>
<footer>
<p>友情链接：<a href="https://facebook.github.io/react/" target="_blank">react</a> <a href="http://www.lovewebgames.com/" target="_blank">javascript JY</a> <a href="http://www.lovewebgames.com/jsmodule/index.html" target="_blank">js组件</a><a href="https://tianxiangbing.github.io/react-cn/">react中文文档</a></p>
<p>© 2016-2017 <a href="https://tianxiangbing.github.io/react-cn/">react-cn.com</a> 版权所有 ICP证：浙ICP备09082150号-3</p>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
    // setTimeout(function(){
    //     if(localStorage.getItem('isopen')!=1){
    //         localStorage.setItem('isopen',1)
    //         window.open('http://www.lovewebgames.com/');
    //     }
    // },1000)
})();
</script>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"5","bdPos":"right","bdTop":"91.5"},"image":{"viewList":["qzone","tsina","tqq","weixin","tieba","sqq"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","weixin","tieba","sqq"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</footer>
</body>
</html>